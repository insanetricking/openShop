class Heart {
  constructor() {
    this.hearts = [...document.querySelectorAll('.cards__heart')];
    this.hearts.forEach(heart => {
      heart.addEventListener('click', e => {
        this.change(e, heart);
      });
    });
  }

  change(e) {
    if (e.target.dataset.flag === 'true') {
      e.target.src = '../images/heart.svg';
      e.target.dataset.flag = false;
    } else {
      e.target.setAttribute('data-flag', true);
      e.target.src = '../images/heartRed.svg';
    }
  }

}

const heart = new Heart();

class Burger {
  constructor() {
    this.btn = document.querySelector('.prenav__burger');
    this.prenav = document.querySelector('.prenav');
    this.arrow = document.querySelector('.prenav__burger');
    this.prenav.style.transition = '0.8s all ease';
    this.arrow.style.transition = '0.8s all ease';
    this.btn.addEventListener('click', e => {
      this.open(e);
    });
  }

  open(e) {
    if (e.target.classList.contains('active')) {
      e.target.classList.remove('active');
      this.prenav.style.minHeight = '50px';
      this.arrow.style.transform = 'rotateX(0deg)';
    } else {
      this.prenav.style.minHeight = '190px';
      e.target.classList.add('active');
      this.arrow.style.transform = 'rotateX(180deg)';
    }
  }

}

const burger = new Burger();

class ImageSwitcher {
  constructor(obj) {
    this.imageItems = [...document.querySelectorAll(obj.imageItems)];
    this.miniImages = [...document.querySelectorAll(obj.miniImages)];
    this.images = [...document.querySelectorAll(obj.images)];
    this.current = 0;
    this.imageItems.forEach(item => {
      item.addEventListener('click', e => {
        this.switch(e);
      });
    });
  }

  switch(e) {
    this.imageItems.forEach(item => {
      item.classList.remove('active');
    });
    this.images.forEach(item => {
      item.classList.remove('active');
    });
    this.current = this.miniImages.indexOf(e.target);
    this.imageItems[this.current].classList.add('active');
    this.images[this.current].classList.add('active');
  }

}

const imageSwitcher = new ImageSwitcher({
  imageItems: '.item__box-item',
  images: '.item__mainImg',
  miniImages: '.item__miniImg'
});

class Slider {
  constructor() {
    this.sliderInner = document.querySelector('.slider__inner');
    this.sliderLine = this.sliderInner.querySelector('.slider__line');
    this.sliderSlides = [...this.sliderLine.querySelectorAll('.slider__slide')];
    this.sliderPagination = this.sliderInner.querySelector('.slider__pagination');
    this.sliderRounds = [...this.sliderInner.querySelectorAll('.slider__round')];
    this.count = 0;
    this.x1 = null;
    this.y1 = null; //////////////////////// Click//////////////////////////

    this.init();
    window.addEventListener('resize', () => {
      this.init();
    });
    this.sliderPagination.addEventListener('click', e => {
      this.change(e);
    }); //////////////////////// Interval//////////////////////////

    this.intervalId = this.interval();
    this.sliderPagination.addEventListener('mouseover', () => {
      clearInterval(this.intervalId);
    });
    this.sliderPagination.addEventListener('mouseout', () => {
      this.intervalId = setInterval(() => {
        this.autoClick();
      }, 3000);
    }); //////////////////////// Touch//////////////////////////

    this.sliderInner.addEventListener('touchstart', e => {
      this.handleTouchStart(e);
      clearInterval(this.intervalId);
    }, false);
    this.sliderInner.addEventListener('touchmove', e => {
      this.handleTouchMove(e);
    }, false);
  }

  init() {
    this.width = this.sliderInner.offsetWidth;
    this.sliderLine.style.width = this.width * this.sliderSlides.length + 'px';
    this.sliderSlides.forEach(item => {
      item.style.width = this.width + 'px';
      item.style.height = 'auto';
    });
  }

  change(e) {
    if (e.target != this.sliderPagination) {
      this.sliderRounds.forEach((btn, index) => {
        btn.classList.remove('active');

        if (e.target === btn) {
          this.count = index;
          this.translate();
        }
      });
    }
  }

  translate() {
    this.sliderRounds[this.count].classList.add('active');
    this.sliderLine.style.transform = `translateX(-${this.count * this.width}px)`;
  }

  autoClick() {
    this.sliderRounds.forEach(btn => {
      btn.classList.remove('active');
    });
    this.count++;

    if (this.count >= this.sliderRounds.length) {
      this.count = 0;
      this.translate();
    } else {
      this.translate();
    }
  }

  handleTouchStart(e) {
    let touch = e.touches[0];
    this.x1 = touch.clientX;
    this.y1 = touch.clientY;
  }

  handleTouchMove(e) {
    if (!(this.x1 || this.y1)) {
      return false;
    }

    let touch = e.touches[0];
    let x2 = touch.clientX;
    let y2 = touch.clientY;
    let xDiff = x2 - this.x1;
    let yDiff = y2 - this.y1; // console.log(this.x1, x2);

    if (xDiff > 0) {
      //r
      this.sliderRounds.forEach(btn => {
        btn.classList.remove('active');
      });
      this.count--;

      if (this.count < 0) {
        this.count = this.sliderRounds.length - 1;
        this.sliderRounds[this.count].classList.add('active');
        this.sliderLine.style.transform = `translateX(-${this.count * this.width}px)`;
      }

      this.sliderRounds[this.count].classList.add('active');
      this.sliderLine.style.transform = `translateX(-${this.count * this.width}px)`;
    } else {
      //l
      this.autoClick();
    }

    this.x1 = null;
    this.y1 = null;
    this.intervalId = this.interval();
  }

  interval() {
    let id = setInterval(() => {
      this.autoClick();
    }, 3000);
    return id;
  }

}

let slider = new Slider();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjdGl2ZUhlYXJ0LmpzIiwiYnVyZ2VyLmpzIiwiaW1hZ2VTd2l0Y2hlci5qcyIsInNsaWRlci5qcyJdLCJuYW1lcyI6WyJIZWFydCIsImNvbnN0cnVjdG9yIiwiaGVhcnRzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImhlYXJ0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJjaGFuZ2UiLCJ0YXJnZXQiLCJkYXRhc2V0IiwiZmxhZyIsInNyYyIsInNldEF0dHJpYnV0ZSIsIkJ1cmdlciIsImJ0biIsInF1ZXJ5U2VsZWN0b3IiLCJwcmVuYXYiLCJhcnJvdyIsInN0eWxlIiwidHJhbnNpdGlvbiIsIm9wZW4iLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInJlbW92ZSIsIm1pbkhlaWdodCIsInRyYW5zZm9ybSIsImFkZCIsImJ1cmdlciIsIkltYWdlU3dpdGNoZXIiLCJvYmoiLCJpbWFnZUl0ZW1zIiwibWluaUltYWdlcyIsImltYWdlcyIsImN1cnJlbnQiLCJpdGVtIiwic3dpdGNoIiwiaW5kZXhPZiIsImltYWdlU3dpdGNoZXIiLCJTbGlkZXIiLCJzbGlkZXJJbm5lciIsInNsaWRlckxpbmUiLCJzbGlkZXJTbGlkZXMiLCJzbGlkZXJQYWdpbmF0aW9uIiwic2xpZGVyUm91bmRzIiwiY291bnQiLCJ4MSIsInkxIiwiaW5pdCIsIndpbmRvdyIsImludGVydmFsSWQiLCJpbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsImF1dG9DbGljayIsImhhbmRsZVRvdWNoU3RhcnQiLCJoYW5kbGVUb3VjaE1vdmUiLCJ3aWR0aCIsIm9mZnNldFdpZHRoIiwibGVuZ3RoIiwiaGVpZ2h0IiwiaW5kZXgiLCJ0cmFuc2xhdGUiLCJ0b3VjaCIsInRvdWNoZXMiLCJjbGllbnRYIiwiY2xpZW50WSIsIngyIiwieTIiLCJ4RGlmZiIsInlEaWZmIiwiaWQiLCJzbGlkZXIiXSwibWFwcGluZ3MiOiJBQUNBLE1BQUFBLEtBQUEsQ0FB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QUFBIiwiZmlsZSI6ImFsbC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuY2xhc3MgSGVhcnQge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5oZWFydHMgPSBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhcmRzX19oZWFydCcpXTtcclxuXHJcbiAgICAgICBcclxuICAgICAgICB0aGlzLmhlYXJ0cy5mb3JFYWNoKGhlYXJ0ID0+e1xyXG4gICAgICAgICAgICBoZWFydC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZShlLCBoZWFydCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBjaGFuZ2UoZSkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmKGUudGFyZ2V0LmRhdGFzZXQuZmxhZyA9PT0gJ3RydWUnKXtcclxuICAgICAgICAgICAgZS50YXJnZXQuc3JjPSAnLi4vaW1hZ2VzL2hlYXJ0LnN2ZydcclxuICAgICAgICAgICAgZS50YXJnZXQuZGF0YXNldC5mbGFnID0gZmFsc2U7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGUudGFyZ2V0LnNldEF0dHJpYnV0ZSgnZGF0YS1mbGFnJywgdHJ1ZSlcclxuICAgICAgICAgICAgZS50YXJnZXQuc3JjPSAnLi4vaW1hZ2VzL2hlYXJ0UmVkLnN2ZydcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5jb25zdCBoZWFydCA9IG5ldyBIZWFydCgpO1xyXG4iLCJjbGFzcyBCdXJnZXJ7XHJcbiAgICBjb25zdHJ1Y3Rvcigpe1xyXG4gICAgICAgIHRoaXMuYnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByZW5hdl9fYnVyZ2VyJyk7XHJcbiAgICAgICAgdGhpcy5wcmVuYXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJlbmF2Jyk7XHJcbiAgICAgICAgdGhpcy5hcnJvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcmVuYXZfX2J1cmdlcicpO1xyXG5cclxuICAgICAgICB0aGlzLnByZW5hdi5zdHlsZS50cmFuc2l0aW9uID0gJzAuOHMgYWxsIGVhc2UnO1xyXG4gICAgICAgIHRoaXMuYXJyb3cuc3R5bGUudHJhbnNpdGlvbiA9ICcwLjhzIGFsbCBlYXNlJztcclxuICAgICAgIFxyXG5cclxuICAgICAgICB0aGlzLmJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKT0+e1xyXG4gICAgICAgICAgICB0aGlzLm9wZW4oZSk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIG9wZW4oZSl7XHJcbiAgICAgICAgXHJcbiAgICAgICBpZihlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKXtcclxuICAgICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgICAgICAgICB0aGlzLnByZW5hdi5zdHlsZS5taW5IZWlnaHQgPSAnNTBweCc7XHJcbiAgICAgICAgICAgdGhpcy5hcnJvdy5zdHlsZS50cmFuc2Zvcm0gPSdyb3RhdGVYKDBkZWcpJ1xyXG4gICAgICAgfSBlbHNle1xyXG4gICAgICAgIHRoaXMucHJlbmF2LnN0eWxlLm1pbkhlaWdodCA9ICcxOTBweCc7XHJcbiAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICAgICAgdGhpcy5hcnJvdy5zdHlsZS50cmFuc2Zvcm0gPSdyb3RhdGVYKDE4MGRlZyknXHJcbiAgICAgICB9XHJcbiAgICAgICBcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgYnVyZ2VyID0gbmV3IEJ1cmdlcigpO1xyXG5cclxuXHJcbiIsImNsYXNzIEltYWdlU3dpdGNoZXIge1xyXG4gICAgY29uc3RydWN0b3Iob2JqKSB7XHJcbiAgICAgICAgdGhpcy5pbWFnZUl0ZW1zID0gWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwob2JqLmltYWdlSXRlbXMpXTtcclxuICAgICAgICB0aGlzLm1pbmlJbWFnZXMgPSBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChvYmoubWluaUltYWdlcyldO1xyXG4gICAgICAgIHRoaXMuaW1hZ2VzID0gWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwob2JqLmltYWdlcyldO1xyXG5cclxuICAgICAgICB0aGlzLmN1cnJlbnQgPSAwO1xyXG5cclxuICAgICAgICB0aGlzLmltYWdlSXRlbXMuZm9yRWFjaChpdGVtID0+IHtcclxuXHJcbiAgICAgICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zd2l0Y2goZSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICB9XHJcblxyXG5cclxuICAgIHN3aXRjaChlKSB7XHJcblxyXG4gICAgICAgIHRoaXMuaW1hZ2VJdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuaW1hZ2VzLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuY3VycmVudCA9IHRoaXMubWluaUltYWdlcy5pbmRleE9mKGUudGFyZ2V0KTtcclxuXHJcbiAgICAgICAgdGhpcy5pbWFnZUl0ZW1zW3RoaXMuY3VycmVudF0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICAgICAgdGhpcy5pbWFnZXNbdGhpcy5jdXJyZW50XS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuXHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbmNvbnN0IGltYWdlU3dpdGNoZXIgPSBuZXcgSW1hZ2VTd2l0Y2hlcihcclxuICAgIHtcclxuICAgICAgICBpbWFnZUl0ZW1zOiAnLml0ZW1fX2JveC1pdGVtJyxcclxuICAgICAgICBpbWFnZXM6ICcuaXRlbV9fbWFpbkltZycsXHJcbiAgICAgICAgbWluaUltYWdlczogJy5pdGVtX19taW5pSW1nJyxcclxuICAgIH1cclxuKSIsIlxyXG5jbGFzcyBTbGlkZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5zbGlkZXJJbm5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXJfX2lubmVyJyk7XHJcbiAgICAgICAgdGhpcy5zbGlkZXJMaW5lID0gdGhpcy5zbGlkZXJJbm5lci5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyX19saW5lJyk7XHJcbiAgICAgICAgdGhpcy5zbGlkZXJTbGlkZXMgPSBbLi4udGhpcy5zbGlkZXJMaW5lLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZXJfX3NsaWRlJyldO1xyXG4gICAgICAgIHRoaXMuc2xpZGVyUGFnaW5hdGlvbiA9IHRoaXMuc2xpZGVySW5uZXIucXVlcnlTZWxlY3RvcignLnNsaWRlcl9fcGFnaW5hdGlvbicpO1xyXG4gICAgICAgIHRoaXMuc2xpZGVyUm91bmRzID0gWy4uLnRoaXMuc2xpZGVySW5uZXIucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRlcl9fcm91bmQnKV07XHJcblxyXG4gICAgICAgIHRoaXMuY291bnQgPSAwO1xyXG5cclxuICAgICAgICB0aGlzLngxID0gbnVsbDtcclxuICAgICAgICB0aGlzLnkxID0gbnVsbDtcclxuXHJcblxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gQ2xpY2svLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIHRoaXMuaW5pdCgpXHJcblxyXG5cclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmluaXQoKVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIHRoaXMuc2xpZGVyUGFnaW5hdGlvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlKGUpXHJcbiAgICAgICAgfSlcclxuXHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBJbnRlcnZhbC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG4gICAgICAgIHRoaXMuaW50ZXJ2YWxJZCA9IHRoaXMuaW50ZXJ2YWwoKTsgXHJcblxyXG5cclxuICAgICAgICB0aGlzLnNsaWRlclBhZ2luYXRpb24uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWxJZCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICB0aGlzLnNsaWRlclBhZ2luYXRpb24uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYXV0b0NsaWNrKCk7XHJcbiAgICAgICAgICAgIH0sIDMwMDApO1xyXG4gICAgICAgIH0pXHJcblxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gVG91Y2gvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuICAgICAgICB0aGlzLnNsaWRlcklubmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZVRvdWNoU3RhcnQoZSk7XHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbElkKTtcclxuICAgICAgICB9LCBmYWxzZSk7XHJcblxyXG4gICAgICAgIHRoaXMuc2xpZGVySW5uZXIuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgKGUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVUb3VjaE1vdmUoZSk7XHJcbiAgICAgICAgfSwgZmFsc2UpO1xyXG5cclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIGluaXQoKSB7XHJcbiAgICAgICAgdGhpcy53aWR0aCA9IHRoaXMuc2xpZGVySW5uZXIub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgdGhpcy5zbGlkZXJMaW5lLnN0eWxlLndpZHRoID0gdGhpcy53aWR0aCAqIHRoaXMuc2xpZGVyU2xpZGVzLmxlbmd0aCArICdweCc7XHJcblxyXG4gICAgICAgIHRoaXMuc2xpZGVyU2xpZGVzLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpdGVtLnN0eWxlLndpZHRoID0gdGhpcy53aWR0aCArICdweCc7XHJcbiAgICAgICAgICAgIGl0ZW0uc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nO1xyXG5cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGNoYW5nZShlKSB7XHJcbiAgICAgICAgaWYgKGUudGFyZ2V0ICE9IHRoaXMuc2xpZGVyUGFnaW5hdGlvbikge1xyXG5cclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2xpZGVyUm91bmRzLmZvckVhY2goKGJ0biwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQgPT09IGJ0bikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY291bnQgPSBpbmRleDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zbGF0ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHRyYW5zbGF0ZSgpIHtcclxuXHJcbiAgICAgICAgdGhpcy5zbGlkZXJSb3VuZHNbdGhpcy5jb3VudF0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcblxyXG4gICAgICAgIHRoaXMuc2xpZGVyTGluZS5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgtJHt0aGlzLmNvdW50ICogdGhpcy53aWR0aH1weClgO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBhdXRvQ2xpY2soKSB7XHJcbiAgICAgICAgdGhpcy5zbGlkZXJSb3VuZHMuZm9yRWFjaChidG4gPT4ge1xyXG4gICAgICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jb3VudCsrO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5jb3VudCA+PSB0aGlzLnNsaWRlclJvdW5kcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5jb3VudCA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMudHJhbnNsYXRlKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy50cmFuc2xhdGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZVRvdWNoU3RhcnQoZSkge1xyXG5cclxuICAgICAgICBsZXQgdG91Y2ggPSBlLnRvdWNoZXNbMF07XHJcbiAgICAgICAgdGhpcy54MSA9IHRvdWNoLmNsaWVudFg7XHJcbiAgICAgICAgdGhpcy55MSA9IHRvdWNoLmNsaWVudFk7XHJcblxyXG5cclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVUb3VjaE1vdmUoZSkge1xyXG5cclxuICAgICAgICBpZiAoISh0aGlzLngxIHx8IHRoaXMueTEpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHRvdWNoID0gZS50b3VjaGVzWzBdO1xyXG5cclxuICAgICAgICBsZXQgeDIgPSB0b3VjaC5jbGllbnRYO1xyXG4gICAgICAgIGxldCB5MiA9IHRvdWNoLmNsaWVudFk7XHJcblxyXG5cclxuXHJcbiAgICAgICAgbGV0IHhEaWZmID0geDIgLSB0aGlzLngxO1xyXG4gICAgICAgIGxldCB5RGlmZiA9IHkyIC0gdGhpcy55MTtcclxuXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy54MSwgeDIpO1xyXG5cclxuICAgICAgICBpZiAoeERpZmYgPiAwKSB7XHJcbiAgICAgICAgICAgIC8vclxyXG5cclxuICAgICAgICAgICAgdGhpcy5zbGlkZXJSb3VuZHMuZm9yRWFjaChidG4gPT4ge1xyXG4gICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgdGhpcy5jb3VudC0tO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jb3VudCA8IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY291bnQgPSB0aGlzLnNsaWRlclJvdW5kcy5sZW5ndGggLSAxO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuc2xpZGVyUm91bmRzW3RoaXMuY291bnRdLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zbGlkZXJMaW5lLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKC0ke3RoaXMuY291bnQgKiB0aGlzLndpZHRofXB4KWA7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc2xpZGVyUm91bmRzW3RoaXMuY291bnRdLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICB0aGlzLnNsaWRlckxpbmUuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoLSR7dGhpcy5jb3VudCAqIHRoaXMud2lkdGh9cHgpYDtcclxuXHJcblxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vbFxyXG5cclxuICAgICAgICAgICAgdGhpcy5hdXRvQ2xpY2soKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB0aGlzLngxID0gbnVsbDtcclxuICAgICAgICB0aGlzLnkxID0gbnVsbDtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmludGVydmFsSWQgPSB0aGlzLmludGVydmFsKCk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGludGVydmFsKCl7XHJcbiAgICAgIGxldCBpZCA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5hdXRvQ2xpY2soKTtcclxuICAgICAgICB9LCAzMDAwKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGlkO1xyXG4gICAgfVxyXG59XHJcblxyXG5sZXQgc2xpZGVyID0gbmV3IFNsaWRlcigpOyJdfQ==
