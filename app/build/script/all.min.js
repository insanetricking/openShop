class Slider {
  constructor() {
    this.sliderInner = document.querySelector('.slider__inner');
    this.sliderLine = this.sliderInner.querySelector('.slider__line');
    this.sliderSlides = [...this.sliderLine.querySelectorAll('.slider__slide')];
    this.sliderPagination = this.sliderInner.querySelector('.slider__pagination');
    this.sliderRounds = [...this.sliderInner.querySelectorAll('.slider__round')];
    this.count = 0;
    this.x1 = null;
    this.y1 = null; //////////////////////// Click//////////////////////////

    this.init();
    window.addEventListener('resize', () => {
      this.init();
    });
    this.sliderPagination.addEventListener('click', e => {
      this.change(e);
    }); //////////////////////// Interval//////////////////////////
    // this.intervalId = setInterval(() => {
    //     this.autoClick();
    // }, 3000);

    this.sliderPagination.addEventListener('mouseover', () => {
      clearInterval(this.intervalId);
    });
    this.sliderPagination.addEventListener('mouseout', () => {
      this.intervalId = setInterval(() => {
        this.autoClick();
      }, 3000);
    }); //////////////////////// Touch//////////////////////////

    this.sliderInner.addEventListener('touchstart', e => {
      this.handleTouchStart(e);
    }, false);
    this.sliderInner.addEventListener('touchmove', e => {
      this.handleTouchMove(e);
    }, false);
  }

  init() {
    this.width = this.sliderInner.offsetWidth;
    this.sliderLine.style.width = this.width * this.sliderSlides.length + 'px';
    this.sliderSlides.forEach(item => {
      item.style.width = this.width + 'px';
      item.style.height = 'auto';
    });
  }

  change(e) {
    if (e.target != this.sliderPagination) {
      this.sliderRounds.forEach((btn, index) => {
        btn.classList.remove('active');

        if (e.target === btn) {
          this.count = index;
          this.translate();
        }
      });
    }
  }

  translate() {
    this.sliderRounds[this.count].classList.add('active');
    this.sliderLine.style.transform = `translateX(-${this.count * this.width}px)`;
  }

  autoClick() {
    this.sliderRounds.forEach(btn => {
      btn.classList.remove('active');
    });
    this.count++;

    if (this.count >= this.sliderRounds.length) {
      this.count = 0;
      this.translate();
    } else {
      this.translate();
    }
  }

  handleTouchStart(e) {
    let touch = e.touches[0];
    this.x1 = touch.clientX;
    this.y1 = touch.clientY;
  }

  handleTouchMove(e) {
    // if(!this.x1 || this.y1){
    //         return false;
    // }
    let touch = e.touches[0];
    let x2 = touch.clientX;
    let y2 = touch.clientY;
    let xDiff = x2 - this.x1;
    let yDiff = y2 - this.y1;
    console.log(this.x1, x2);

    if (xDiff > 0) {
      //r
      this.autoClick();
    } else {
      //l
      this.sliderRounds.forEach(btn => {
        btn.classList.remove('active');
      });
      this.count--;

      if (this.count <= 0) {
        this.count = this.sliderRounds.length;
        console.log(this.count);
        this.sliderRounds[this.count].classList.add('active');
        this.sliderLine.style.transform = `translateX(${this.count * this.width}px)`;
      } else {
        this.sliderRounds[this.count].classList.add('active');
        this.sliderLine.style.transform = `translateX(${this.count * this.width}px)`;
      }
    }

    this.x1 = null;
    this.y1 = null;
  }

}

let slider = new Slider();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNsaWRlci5qcyJdLCJuYW1lcyI6WyJTbGlkZXIiLCJjb25zdHJ1Y3RvciIsInNsaWRlcklubmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwic2xpZGVyTGluZSIsInNsaWRlclNsaWRlcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJzbGlkZXJQYWdpbmF0aW9uIiwic2xpZGVyUm91bmRzIiwiY291bnQiLCJ4MSIsInkxIiwiaW5pdCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiY2hhbmdlIiwiY2xlYXJJbnRlcnZhbCIsImludGVydmFsSWQiLCJzZXRJbnRlcnZhbCIsImF1dG9DbGljayIsImhhbmRsZVRvdWNoU3RhcnQiLCJoYW5kbGVUb3VjaE1vdmUiLCJ3aWR0aCIsIm9mZnNldFdpZHRoIiwic3R5bGUiLCJsZW5ndGgiLCJmb3JFYWNoIiwiaXRlbSIsImhlaWdodCIsInRhcmdldCIsImJ0biIsImluZGV4IiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwidHJhbnNsYXRlIiwiYWRkIiwidHJhbnNmb3JtIiwidG91Y2giLCJ0b3VjaGVzIiwiY2xpZW50WCIsImNsaWVudFkiLCJ4MiIsInkyIiwieERpZmYiLCJ5RGlmZiIsImNvbnNvbGUiLCJsb2ciLCJzbGlkZXIiXSwibWFwcGluZ3MiOiJBQUNBLE1BQUFBLE1BQUEsQ0FBQTtBQUNBQyxFQUFBQSxXQUFBLEdBQUE7QUFDQSxTQUFBQyxXQUFBLEdBQUFDLFFBQUEsQ0FBQUMsYUFBQSxDQUFBLGdCQUFBLENBQUE7QUFDQSxTQUFBQyxVQUFBLEdBQUEsS0FBQUgsV0FBQSxDQUFBRSxhQUFBLENBQUEsZUFBQSxDQUFBO0FBQ0EsU0FBQUUsWUFBQSxHQUFBLENBQUEsR0FBQSxLQUFBRCxVQUFBLENBQUFFLGdCQUFBLENBQUEsZ0JBQUEsQ0FBQSxDQUFBO0FBQ0EsU0FBQUMsZ0JBQUEsR0FBQSxLQUFBTixXQUFBLENBQUFFLGFBQUEsQ0FBQSxxQkFBQSxDQUFBO0FBQ0EsU0FBQUssWUFBQSxHQUFB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b0IsUUFBQUEsT0FBQSxDQUFBQyxHQUFBLENBQUEsS0FBQXRDLEtBQUE7QUFFQSxhQUFBRCxZQUFBLENBQUEsS0FBQUMsS0FBQSxFQUFBd0IsU0FBQSxDQUFBRyxHQUFBLENBQUEsUUFBQTtBQUVBLGFBQUFoQyxVQUFBLENBQUFxQixLQUFBLENBQUFZLFNBQUEsR0FBQSxjQUFBLEtBQUE1QixLQUFBLEdBQUEsS0FBQWMsS0FBQSxLQUFBO0FBQ0EsT0FQQSxNQU9BO0FBRUEsYUFBQWYsWUFBQSxDQUFBLEtBQUFDLEtBQUEsRUFBQXdCLFNBQUEsQ0FBQUcsR0FBQSxDQUFBLFFBQUE7QUFFQSxhQUFBaEMsVUFBQSxDQUFBcUIsS0FBQSxDQUFBWSxTQUFBLEdBQUEsY0FBQSxLQUFBNUIsS0FBQSxHQUFBLEtBQUFjLEtBQUEsS0FBQTtBQUNBO0FBRUE7O0FBR0EsU0FBQWIsRUFBQSxHQUFBLElBQUE7QUFDQSxTQUFBQyxFQUFBLEdBQUEsSUFBQTtBQUNBOztBQXZLQTs7QUEwS0EsSUFBQXFDLE1BQUEsR0FBQSxJQUFBakQsTUFBQSxFQUFBIiwiZmlsZSI6ImFsbC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuY2xhc3MgU2xpZGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuc2xpZGVySW5uZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyX19pbm5lcicpO1xyXG4gICAgICAgIHRoaXMuc2xpZGVyTGluZSA9IHRoaXMuc2xpZGVySW5uZXIucXVlcnlTZWxlY3RvcignLnNsaWRlcl9fbGluZScpO1xyXG4gICAgICAgIHRoaXMuc2xpZGVyU2xpZGVzID0gWy4uLnRoaXMuc2xpZGVyTGluZS5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGVyX19zbGlkZScpXTtcclxuICAgICAgICB0aGlzLnNsaWRlclBhZ2luYXRpb24gPSB0aGlzLnNsaWRlcklubmVyLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXJfX3BhZ2luYXRpb24nKTtcclxuICAgICAgICB0aGlzLnNsaWRlclJvdW5kcyA9IFsuLi50aGlzLnNsaWRlcklubmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZXJfX3JvdW5kJyldO1xyXG5cclxuICAgICAgICB0aGlzLmNvdW50ID0gMDtcclxuXHJcbiAgICAgICAgdGhpcy54MSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy55MSA9IG51bGw7XHJcblxyXG5cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIENsaWNrLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICB0aGlzLmluaXQoKVxyXG5cclxuXHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5pbml0KClcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICB0aGlzLnNsaWRlclBhZ2luYXRpb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZShlKVxyXG4gICAgICAgIH0pXHJcblxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gSW50ZXJ2YWwvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuICAgICAgICAvLyB0aGlzLmludGVydmFsSWQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMuYXV0b0NsaWNrKCk7XHJcbiAgICAgICAgLy8gfSwgMzAwMCk7XHJcblxyXG5cclxuICAgICAgICB0aGlzLnNsaWRlclBhZ2luYXRpb24uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWxJZCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICB0aGlzLnNsaWRlclBhZ2luYXRpb24uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYXV0b0NsaWNrKCk7XHJcbiAgICAgICAgICAgIH0sIDMwMDApO1xyXG4gICAgICAgIH0pXHJcblxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gVG91Y2gvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuICAgICAgICB0aGlzLnNsaWRlcklubmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZVRvdWNoU3RhcnQoZSk7XHJcbiAgICAgICAgfSwgZmFsc2UpO1xyXG5cclxuICAgICAgICB0aGlzLnNsaWRlcklubmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlVG91Y2hNb3ZlKGUpO1xyXG4gICAgICAgIH0sIGZhbHNlKTtcclxuXHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIHRoaXMud2lkdGggPSB0aGlzLnNsaWRlcklubmVyLm9mZnNldFdpZHRoO1xyXG4gICAgICAgIHRoaXMuc2xpZGVyTGluZS5zdHlsZS53aWR0aCA9IHRoaXMud2lkdGggKiB0aGlzLnNsaWRlclNsaWRlcy5sZW5ndGggKyAncHgnO1xyXG5cclxuICAgICAgICB0aGlzLnNsaWRlclNsaWRlcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICBpdGVtLnN0eWxlLndpZHRoID0gdGhpcy53aWR0aCArICdweCc7XHJcbiAgICAgICAgICAgIGl0ZW0uc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nO1xyXG5cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGNoYW5nZShlKSB7XHJcbiAgICAgICAgaWYgKGUudGFyZ2V0ICE9IHRoaXMuc2xpZGVyUGFnaW5hdGlvbikge1xyXG5cclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2xpZGVyUm91bmRzLmZvckVhY2goKGJ0biwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQgPT09IGJ0bikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY291bnQgPSBpbmRleDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zbGF0ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHRyYW5zbGF0ZSgpIHtcclxuXHJcbiAgICAgICAgdGhpcy5zbGlkZXJSb3VuZHNbdGhpcy5jb3VudF0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcblxyXG4gICAgICAgIHRoaXMuc2xpZGVyTGluZS5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgtJHt0aGlzLmNvdW50ICogdGhpcy53aWR0aH1weClgO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBhdXRvQ2xpY2soKSB7XHJcbiAgICAgICAgdGhpcy5zbGlkZXJSb3VuZHMuZm9yRWFjaChidG4gPT4ge1xyXG4gICAgICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jb3VudCsrO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5jb3VudCA+PSB0aGlzLnNsaWRlclJvdW5kcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5jb3VudCA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMudHJhbnNsYXRlKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy50cmFuc2xhdGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZVRvdWNoU3RhcnQoZSkge1xyXG5cclxuICAgICAgICBsZXQgdG91Y2ggPSBlLnRvdWNoZXNbMF07XHJcbiAgICAgICAgdGhpcy54MSA9IHRvdWNoLmNsaWVudFg7XHJcbiAgICAgICAgdGhpcy55MSA9IHRvdWNoLmNsaWVudFk7XHJcblxyXG5cclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVUb3VjaE1vdmUoZSkge1xyXG5cclxuICAgICAgICAvLyBpZighdGhpcy54MSB8fCB0aGlzLnkxKXtcclxuICAgICAgICAvLyAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgbGV0IHRvdWNoID0gZS50b3VjaGVzWzBdO1xyXG5cclxuICAgICAgICBsZXQgeDIgPSB0b3VjaC5jbGllbnRYO1xyXG4gICAgICAgIGxldCB5MiA9IHRvdWNoLmNsaWVudFk7XHJcblxyXG5cclxuXHJcbiAgICAgICAgbGV0IHhEaWZmID0geDIgLSB0aGlzLngxO1xyXG4gICAgICAgIGxldCB5RGlmZiA9IHkyIC0gdGhpcy55MTtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2codGhpcy54MSwgeDIpO1xyXG5cclxuICAgICAgICBpZiAoeERpZmYgPiAwKSB7XHJcbiAgICAgICAgICAgIC8vclxyXG4gICAgICAgICAgICB0aGlzLmF1dG9DbGljaygpO1xyXG5cclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy9sXHJcbiAgICAgICAgICAgIHRoaXMuc2xpZGVyUm91bmRzLmZvckVhY2goYnRuID0+IHtcclxuICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNvdW50LS07XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvdW50IDw9IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY291bnQgPSB0aGlzLnNsaWRlclJvdW5kcy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmNvdW50KVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuc2xpZGVyUm91bmRzW3RoaXMuY291bnRdLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuc2xpZGVyTGluZS5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgke3RoaXMuY291bnQgKiB0aGlzLndpZHRofXB4KWA7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5zbGlkZXJSb3VuZHNbdGhpcy5jb3VudF0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5zbGlkZXJMaW5lLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKCR7dGhpcy5jb3VudCAqIHRoaXMud2lkdGh9cHgpYDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB0aGlzLngxID0gbnVsbDtcclxuICAgICAgICB0aGlzLnkxID0gbnVsbDtcclxuICAgIH1cclxufVxyXG5cclxubGV0IHNsaWRlciA9IG5ldyBTbGlkZXIoKTsiXX0=
