class Slider {
  constructor() {
    this.sliderInner = document.querySelector('.slider__inner');
    this.sliderLine = this.sliderInner.querySelector('.slider__line');
    this.sliderSlides = [...this.sliderLine.querySelectorAll('.slider__slide')];
    this.sliderPagination = this.sliderInner.querySelector('.slider__pagination');
    this.sliderRounds = [...this.sliderInner.querySelectorAll('.slider__round')];
    this.count = 0;
    this.x1 = null;
    this.y1 = null; //////////////////////// Click//////////////////////////

    this.init();
    window.addEventListener('resize', () => {
      this.init();
    });
    this.sliderPagination.addEventListener('click', e => {
      this.change(e);
    }); //////////////////////// Interval//////////////////////////

    this.intervalId = this.interval();
    this.sliderPagination.addEventListener('mouseover', () => {
      clearInterval(this.intervalId);
    });
    this.sliderPagination.addEventListener('mouseout', () => {
      this.intervalId = setInterval(() => {
        this.autoClick();
      }, 3000);
    }); //////////////////////// Touch//////////////////////////

    this.sliderInner.addEventListener('touchstart', e => {
      this.handleTouchStart(e);
      clearInterval(this.intervalId);
    }, false);
    this.sliderInner.addEventListener('touchmove', e => {
      this.handleTouchMove(e);
    }, false);
  }

  init() {
    this.width = this.sliderInner.offsetWidth;
    this.sliderLine.style.width = this.width * this.sliderSlides.length + 'px';
    this.sliderSlides.forEach(item => {
      item.style.width = this.width + 'px';
      item.style.height = 'auto';
    });
  }

  change(e) {
    if (e.target != this.sliderPagination) {
      this.sliderRounds.forEach((btn, index) => {
        btn.classList.remove('active');

        if (e.target === btn) {
          this.count = index;
          this.translate();
        }
      });
    }
  }

  translate() {
    this.sliderRounds[this.count].classList.add('active');
    this.sliderLine.style.transform = `translateX(-${this.count * this.width}px)`;
  }

  autoClick() {
    this.sliderRounds.forEach(btn => {
      btn.classList.remove('active');
    });
    this.count++;

    if (this.count >= this.sliderRounds.length) {
      this.count = 0;
      this.translate();
    } else {
      this.translate();
    }
  }

  handleTouchStart(e) {
    let touch = e.touches[0];
    this.x1 = touch.clientX;
    this.y1 = touch.clientY;
  }

  handleTouchMove(e) {
    if (!(this.x1 || this.y1)) {
      return false;
    }

    let touch = e.touches[0];
    let x2 = touch.clientX;
    let y2 = touch.clientY;
    let xDiff = x2 - this.x1;
    let yDiff = y2 - this.y1; // console.log(this.x1, x2);

    if (xDiff > 0) {
      //r
      this.sliderRounds.forEach(btn => {
        btn.classList.remove('active');
      });
      this.count--;

      if (this.count < 0) {
        this.count = this.sliderRounds.length - 1;
        this.sliderRounds[this.count].classList.add('active');
        this.sliderLine.style.transform = `translateX(-${this.count * this.width}px)`;
      }

      this.sliderRounds[this.count].classList.add('active');
      this.sliderLine.style.transform = `translateX(-${this.count * this.width}px)`;
    } else {
      //l
      this.autoClick();
    }

    this.x1 = null;
    this.y1 = null;
    this.intervalId = this.interval();
  }

  interval() {
    let id = setInterval(() => {
      this.autoClick();
    }, 3000);
    return id;
  }

}

let slider = new Slider();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNsaWRlci5qcyJdLCJuYW1lcyI6WyJTbGlkZXIiLCJjb25zdHJ1Y3RvciIsInNsaWRlcklubmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwic2xpZGVyTGluZSIsInNsaWRlclNsaWRlcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJzbGlkZXJQYWdpbmF0aW9uIiwic2xpZGVyUm91bmRzIiwiY291bnQiLCJ4MSIsInkxIiwiaW5pdCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiY2hhbmdlIiwiaW50ZXJ2YWxJZCIsImludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsInNldEludGVydmFsIiwiYXV0b0NsaWNrIiwiaGFuZGxlVG91Y2hTdGFydCIsImhhbmRsZVRvdWNoTW92ZSIsIndpZHRoIiwib2Zmc2V0V2lkdGgiLCJzdHlsZSIsImxlbmd0aCIsImZvckVhY2giLCJpdGVtIiwiaGVpZ2h0IiwidGFyZ2V0IiwiYnRuIiwiaW5kZXgiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJ0cmFuc2xhdGUiLCJhZGQiLCJ0cmFuc2Zvcm0iLCJ0b3VjaCIsInRvdWNoZXMiLCJjbGllbnRYIiwiY2xpZW50WSIsIngyIiwieTIiLCJ4RGlmZiIsInlEaWZmIiwiaWQiLCJzbGlkZXIiXSwibWFwcGluZ3MiOiJBQUNBLE1BQUFBLE1BQUEsQ0FBQTtBQUNBQyxFQUFBQSxXQUFBLEdBQUE7QUFDQSxTQUFBQyxXQUFBLEdBQUFDLFFBQUEsQ0FBQUMsYUFBQSxDQUFBLGdCQUFBLENBQUE7QUFDQSxTQUFBQyxVQUFBLEdBQUEsS0FBQUgsV0FBQSxDQUFBRSxhQUFBLENBQUEsZUFBQSxDQUFBO0FBQ0EsU0FBQUUsWUFBQSxHQUFBLENBQUEsR0FBQSxLQUFBRCxVQUFBLENBQUFFLGdCQUFBLENBQUEsZ0JBQUEsQ0FBQSxDQUFBO0FBQ0EsU0FBQUMsZ0JBQUEsR0FBQSxLQUFBTixXQUFBLENBQUFFLGFBQUEsQ0FBQSxxQkFBQSxDQUFBO0FBQ0EsU0FBQUssWUFBQSxHQUFBLENBQUEsR0FBQSxLQUFBUCxXQUFBLENBQUFLLGdCQUFBLENBQUEsZ0JBQUEsQ0FBQSxDQUFBO0FBRUEsU0FBQUcsS0FBQSxHQUFBLENBQUE7QUFFQSxTQUFBQyxFQUFBLEdBQUEsSUFBQTtBQUNBLFNBQUFDLEVBQUEsR0FBQSxJQUFBLENBVkEsQ0FjQTs7QUFDQSxTQUFBQyxJQUFBO0FBR0FDLElBQUFBLE1BQUEsQ0FBQUMsZ0JBQUEsQ0FBQSxRQUFBLEVBQUEsTUFBQTtBQUNBLFdBQUFGLElBQUE7QUFDQSxLQUZBO0FBSUEsU0FBQUwsZ0JBQUEsQ0FBQU8sZ0JBQUEsQ0FBQSxPQUFBLEVBQUFDLENBQUEsSUFBQTtBQUNBLFdBQUFDLE1BQUEsQ0FBQUQsQ0FBQTtBQUNBLEtBRkEsRUF0QkEsQ0EyQkE7O0FBRUEsU0FBQUUsVUFBQSxHQUFBLEtBQUFDLFFBQUEsRUFBQTtBQUdBLFNBQUFYLGdCQUFBLENBQUFPLGdCQUFBLENBQUEsV0FBQSxFQUFBLE1BQUE7QUFDQUssTUFBQUEsYUFBQSxDQUFBLEtBQUFGLFVBQUEsQ0FBQTtBQUNBLEtBRkE7QUFHQSxTQUFBVixnQkFBQSxDQUFBTyxnQkFBQSxDQUFBLFVBQUEsRUFBQSxNQUFBO0FBQ0EsV0FBQUcsVUFBQSxHQUFBRyxXQUFBLENBQUEsTUFBQTtBQUNBLGFBQUFDLFNBQUE7QUFDQSxPQUZBLEVBRUEsSUFGQSxDQUFBO0FBR0EsS0FKQSxFQW5DQSxDQTBDQTs7QUFFQSxTQUFBcEIsV0FBQSxDQUFBYSxnQkFBQSxDQUFBLFlBQUEsRUFBQUMsQ0FBQSxJQUFBO0FBQ0EsV0FBQU8sZ0JBQUEsQ0FBQVAsQ0FBQTtBQUNBSSxNQUFBQSxhQUFBLENBQUEsS0FBQUYsVUFBQSxDQUFBO0FBQ0EsS0FIQSxFQUdBLEtBSEE7QUFLQSxTQUFBaEIsV0FBQSxDQUFBYSxnQkFBQSxDQUFBLFdBQUEsRUFBQUMsQ0FBQSxJQUFBO0FBQ0EsV0FBQVEsZUFBQSxDQUFBUixDQUFBO0FBQ0EsS0FGQSxFQUVBLEtBRkE7QUFJQTs7QUFJQUgsRUFBQUEsSUFBQSxHQUFBO0FBQ0EsU0FBQVksS0FBQSxHQUFBLEtBQUF2QixXQUFBLENBQUF3QixXQUFBO0FBQ0EsU0FBQXJCLFVBQUEsQ0FBQXNCLEtBQUEsQ0FBQUYsS0FBQSxHQUFBLEtBQUFBLEtBQUEsR0FBQSxLQUFBbkIsWUFBQSxDQUFBc0IsTUFBQSxHQUFBLElBQUE7QUFFQSxTQUFBdEIsWUFBQSxDQUFBdUIsT0FBQSxDQUFBQyxJQUFBLElBQUE7QUFFQUEsTUFBQUEsSUFBQSxDQUFBSCxLQUFBLENBQUFGLEtBQUEsR0FBQSxLQUFBQSxLQUFBLEdBQUEsSUFBQTtBQUNBSyxNQUFBQSxJQUFBLENBQUFILEtBQUEsQ0FBQUksTUFBQSxHQUFBLE1BQUE7QUFFQSxLQUxBO0FBTUE7O0FBRUFkLEVBQUFBLE1BQUEsQ0FBQUQsQ0FBQSxFQUFBO0FBQ0EsUUFBQUEsQ0FBQSxDQUFBZ0IsTUFBQSxJQUFBLEtBQUF4QixnQkFBQSxFQUFBO0FBR0EsV0FBQUMsWUFBQSxDQUFBb0IsT0FBQSxDQUFBLENBQUFJLEdBQUEsRUFBQUMsS0FBQSxLQUFBO0FBQ0FELFFBQUFBLEdBQUEsQ0FBQUUsU0FBQSxDQUFBQyxNQUFBLENBQUEsUUFBQTs7QUFFQSxZQUFBcEIsQ0FBQSxDQUFBZ0IsTUFBQSxLQUFBQyxHQUFBLEVBQUE7QUFDQSxlQUFBdkIsS0FBQSxHQUFBd0IsS0FBQTtBQUNBLGVBQUFHLFNBQUE7QUFFQTtBQUNBLE9BUkE7QUFTQTtBQUVBOztBQUVBQSxFQUFBQSxTQUFBLEdBQUE7QUFFQSxTQUFBNUIsWUFBQSxDQUFBLEtBQUFDLEtBQUEsRUFBQXlCLFNBQUEsQ0FBQUcsR0FBQSxDQUFBLFFBQUE7QUFFQSxTQUFBakMsVUFBQSxDQUFBc0IsS0FBQSxDQUFBWSxTQUFBLEdBQUEsZUFBQSxLQUFBN0IsS0FBQSxHQUFBLEtBQUFlLEtBQUEsS0FBQTtBQUNBOztBQUdBSCxFQUFBQSxTQUFBLEdBQUE7QUFDQSxTQUFBYixZQUFBLENBQUFvQixPQUFBLENBQUFJLEdBQUEsSUFBQTtBQUNBQSxNQUFBQSxHQUFBLENBQUFFLFNBQUEsQ0FBQUMsTUFBQSxDQUFBLFFBQUE7QUFDQSxLQUZBO0FBR0EsU0FBQTFCLEtBQUE7O0FBRUEsUUFBQSxLQUFBQSxLQUFBLElBQUEsS0FBQUQsWUFBQSxDQUFBbUIsTUFBQSxFQUFBO0FBQ0EsV0FBQWxCLEtBQUEsR0FBQSxDQUFBO0FBQ0EsV0FBQTJCLFNBQUE7QUFDQSxLQUhBLE1BR0E7QUFDQSxXQUFBQSxTQUFBO0FBQ0E7QUFFQTs7QUFFQWQsRUFBQUEsZ0JBQUEsQ0FBQVAsQ0FBQSxFQUFBO0FBRUEsUUFBQXdCLEtBQUEsR0FBQXhCLENBQUEsQ0FBQXlCLE9BQUEsQ0FBQSxDQUFBLENBQUE7QUFDQSxTQUFBOUIsRUFBQSxHQUFBNkIsS0FBQSxDQUFBRSxPQUFBO0FBQ0EsU0FBQTlCLEVBQUEsR0FBQTRCLEtBQUEsQ0FBQUcsT0FBQTtBQUdBOztBQUVBbkIsRUFBQUEsZUFBQSxDQUFBUixDQUFBLEVBQUE7QUFFQSxRQUFBLEVBQUEsS0FBQUwsRUFBQSxJQUFBLEtBQUFDLEVBQUEsQ0FBQSxFQUFBO0FBQ0EsYUFBQSxLQUFBO0FBQ0E7O0FBQ0EsUUFBQTRCLEtBQUEsR0FBQXhCLENBQUEsQ0FBQXlCLE9BQUEsQ0FBQSxDQUFBLENBQUE7QUFFQSxRQUFBRyxFQUFBLEdBQUFKLEtBQUEsQ0FBQUUsT0FBQTtBQUNBLFFBQUFHLEVBQUEsR0FBQUwsS0FBQSxDQUFBRyxPQUFBO0FBSUEsUUFBQUcsS0FBQSxHQUFBRixFQUFBLEdBQUEsS0FBQWpDLEVBQUE7QUFDQSxRQUFBb0MsS0FBQSxHQUFBRixFQUFBLEdBQUEsS0FBQWpDLEVBQUEsQ0FiQSxDQWVBOztBQUVBLFFBQUFrQyxLQUFBLEdBQUEsQ0FBQSxFQUFBO0FBQ0E7QUFFQSxXQUFBckMsWUFBQSxDQUFBb0IsT0FBQSxDQUFBSSxHQUFBLElBQUE7QUFDQUEsUUFBQUEsR0FBQSxDQUFBRSxTQUFBLENBQUFDLE1BQUEsQ0FBQSxRQUFBO0FBQ0EsT0FGQTtBQUlBLFdBQUExQixLQUFBOztBQUNBLFVBQUEsS0FBQUEsS0FBQSxHQUFBLENBQUEsRUFBQTtBQUNBLGFBQUFBLEtBQUEsR0FBQSxLQUFBRCxZQUFBLENBQUFtQixNQUFBLEdBQUEsQ0FBQTtBQUVBLGFBQUFuQixZQUFBLENBQUEsS0FBQUMsS0FBQSxFQUFBeUIsU0FBQSxDQUFBRyxHQUFBLENBQUEsUUFBQTtBQUNBLGFBQUFqQyxVQUFBLENBQUFzQixLQUFBLENBQUFZLFNBQUEsR0FBQSxlQUFBLEtBQUE3QixLQUFBLEdBQUEsS0FBQWUsS0FBQSxLQUFBO0FBRUE7O0FBQ0EsV0FBQWhCLFlBQUEsQ0FBQSxLQUFBQyxLQUFBLEVBQUF5QixTQUFBLENBQUFHLEdBQUEsQ0FBQSxRQUFBO0FBQ0EsV0FBQWpDLFVBQUEsQ0FBQXNCLEtBQUEsQ0FBQVksU0FBQSxHQUFBLGVBQUEsS0FBQTdCLEtBQUEsR0FBQSxLQUFBZSxLQUFBLEtBQUE7QUFHQSxLQW5CQSxNQW1CQTtBQUNBO0FBRUEsV0FBQUgsU0FBQTtBQUNBOztBQUdBLFNBQUFYLEVBQUEsR0FBQSxJQUFBO0FBQ0EsU0FBQUMsRUFBQSxHQUFBLElBQUE7QUFFQSxTQUFBTSxVQUFBLEdBQUEsS0FBQUMsUUFBQSxFQUFBO0FBQ0E7O0FBR0FBLEVBQUFBLFFBQUEsR0FBQTtBQUNBLFFBQUE2QixFQUFBLEdBQUEzQixXQUFBLENBQUEsTUFBQTtBQUNBLFdBQUFDLFNBQUE7QUFDQSxLQUZBLEVBRUEsSUFGQSxDQUFBO0FBSUEsV0FBQTBCLEVBQUE7QUFDQTs7QUEvS0E7O0FBa0xBLElBQUFDLE1BQUEsR0FBQSxJQUFBakQsTUFBQSxFQUFBIiwiZmlsZSI6ImFsbC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuY2xhc3MgU2xpZGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuc2xpZGVySW5uZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyX19pbm5lcicpO1xyXG4gICAgICAgIHRoaXMuc2xpZGVyTGluZSA9IHRoaXMuc2xpZGVySW5uZXIucXVlcnlTZWxlY3RvcignLnNsaWRlcl9fbGluZScpO1xyXG4gICAgICAgIHRoaXMuc2xpZGVyU2xpZGVzID0gWy4uLnRoaXMuc2xpZGVyTGluZS5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGVyX19zbGlkZScpXTtcclxuICAgICAgICB0aGlzLnNsaWRlclBhZ2luYXRpb24gPSB0aGlzLnNsaWRlcklubmVyLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXJfX3BhZ2luYXRpb24nKTtcclxuICAgICAgICB0aGlzLnNsaWRlclJvdW5kcyA9IFsuLi50aGlzLnNsaWRlcklubmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZXJfX3JvdW5kJyldO1xyXG5cclxuICAgICAgICB0aGlzLmNvdW50ID0gMDtcclxuXHJcbiAgICAgICAgdGhpcy54MSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy55MSA9IG51bGw7XHJcblxyXG5cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIENsaWNrLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICB0aGlzLmluaXQoKVxyXG5cclxuXHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5pbml0KClcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICB0aGlzLnNsaWRlclBhZ2luYXRpb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZShlKVxyXG4gICAgICAgIH0pXHJcblxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gSW50ZXJ2YWwvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuICAgICAgICB0aGlzLmludGVydmFsSWQgPSB0aGlzLmludGVydmFsKCk7IFxyXG5cclxuXHJcbiAgICAgICAgdGhpcy5zbGlkZXJQYWdpbmF0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsICgpID0+IHtcclxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsSWQpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgdGhpcy5zbGlkZXJQYWdpbmF0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmludGVydmFsSWQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmF1dG9DbGljaygpO1xyXG4gICAgICAgICAgICB9LCAzMDAwKTtcclxuICAgICAgICB9KVxyXG5cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIFRvdWNoLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbiAgICAgICAgdGhpcy5zbGlkZXJJbm5lci5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgKGUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVUb3VjaFN0YXJ0KGUpO1xyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWxJZCk7XHJcbiAgICAgICAgfSwgZmFsc2UpO1xyXG5cclxuICAgICAgICB0aGlzLnNsaWRlcklubmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlVG91Y2hNb3ZlKGUpO1xyXG4gICAgICAgIH0sIGZhbHNlKTtcclxuXHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIHRoaXMud2lkdGggPSB0aGlzLnNsaWRlcklubmVyLm9mZnNldFdpZHRoO1xyXG4gICAgICAgIHRoaXMuc2xpZGVyTGluZS5zdHlsZS53aWR0aCA9IHRoaXMud2lkdGggKiB0aGlzLnNsaWRlclNsaWRlcy5sZW5ndGggKyAncHgnO1xyXG5cclxuICAgICAgICB0aGlzLnNsaWRlclNsaWRlcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaXRlbS5zdHlsZS53aWR0aCA9IHRoaXMud2lkdGggKyAncHgnO1xyXG4gICAgICAgICAgICBpdGVtLnN0eWxlLmhlaWdodCA9ICdhdXRvJztcclxuXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBjaGFuZ2UoZSkge1xyXG4gICAgICAgIGlmIChlLnRhcmdldCAhPSB0aGlzLnNsaWRlclBhZ2luYXRpb24pIHtcclxuXHJcblxyXG4gICAgICAgICAgICB0aGlzLnNsaWRlclJvdW5kcy5mb3JFYWNoKChidG4sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0ID09PSBidG4pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvdW50ID0gaW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2xhdGUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICB0cmFuc2xhdGUoKSB7XHJcblxyXG4gICAgICAgIHRoaXMuc2xpZGVyUm91bmRzW3RoaXMuY291bnRdLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG5cclxuICAgICAgICB0aGlzLnNsaWRlckxpbmUuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoLSR7dGhpcy5jb3VudCAqIHRoaXMud2lkdGh9cHgpYDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgYXV0b0NsaWNrKCkge1xyXG4gICAgICAgIHRoaXMuc2xpZGVyUm91bmRzLmZvckVhY2goYnRuID0+IHtcclxuICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY291bnQrKztcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY291bnQgPj0gdGhpcy5zbGlkZXJSb3VuZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY291bnQgPSAwO1xyXG4gICAgICAgICAgICB0aGlzLnRyYW5zbGF0ZSgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudHJhbnNsYXRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVUb3VjaFN0YXJ0KGUpIHtcclxuXHJcbiAgICAgICAgbGV0IHRvdWNoID0gZS50b3VjaGVzWzBdO1xyXG4gICAgICAgIHRoaXMueDEgPSB0b3VjaC5jbGllbnRYO1xyXG4gICAgICAgIHRoaXMueTEgPSB0b3VjaC5jbGllbnRZO1xyXG5cclxuXHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlVG91Y2hNb3ZlKGUpIHtcclxuXHJcbiAgICAgICAgaWYgKCEodGhpcy54MSB8fCB0aGlzLnkxKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCB0b3VjaCA9IGUudG91Y2hlc1swXTtcclxuXHJcbiAgICAgICAgbGV0IHgyID0gdG91Y2guY2xpZW50WDtcclxuICAgICAgICBsZXQgeTIgPSB0b3VjaC5jbGllbnRZO1xyXG5cclxuXHJcblxyXG4gICAgICAgIGxldCB4RGlmZiA9IHgyIC0gdGhpcy54MTtcclxuICAgICAgICBsZXQgeURpZmYgPSB5MiAtIHRoaXMueTE7XHJcblxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMueDEsIHgyKTtcclxuXHJcbiAgICAgICAgaWYgKHhEaWZmID4gMCkge1xyXG4gICAgICAgICAgICAvL3JcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2xpZGVyUm91bmRzLmZvckVhY2goYnRuID0+IHtcclxuICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY291bnQtLTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY291bnQgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvdW50ID0gdGhpcy5zbGlkZXJSb3VuZHMubGVuZ3RoIC0gMTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNsaWRlclJvdW5kc1t0aGlzLmNvdW50XS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2xpZGVyTGluZS5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgtJHt0aGlzLmNvdW50ICogdGhpcy53aWR0aH1weClgO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnNsaWRlclJvdW5kc1t0aGlzLmNvdW50XS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgdGhpcy5zbGlkZXJMaW5lLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKC0ke3RoaXMuY291bnQgKiB0aGlzLndpZHRofXB4KWA7XHJcblxyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvL2xcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYXV0b0NsaWNrKCk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgdGhpcy54MSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy55MSA9IG51bGw7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5pbnRlcnZhbElkID0gdGhpcy5pbnRlcnZhbCgpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBpbnRlcnZhbCgpe1xyXG4gICAgICBsZXQgaWQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0b0NsaWNrKCk7XHJcbiAgICAgICAgfSwgMzAwMCk7XHJcblxyXG4gICAgICAgIHJldHVybiBpZDtcclxuICAgIH1cclxufVxyXG5cclxubGV0IHNsaWRlciA9IG5ldyBTbGlkZXIoKTsiXX0=
