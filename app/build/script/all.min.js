class Slider {
  constructor() {
    this.sliderInner = document.querySelector('.slider__inner');
    this.sliderLine = this.sliderInner.querySelector('.slider__line');
    this.sliderSlides = [...this.sliderLine.querySelectorAll('.slider__slide')];
    this.sliderPagination = this.sliderInner.querySelector('.slider__pagination');
    this.sliderRounds = [...this.sliderInner.querySelectorAll('.slider__round')];
    this.count = 0;
    this.x1 = null;
    this.y1 = null; //////////////////////// Click//////////////////////////

    this.init();
    window.addEventListener('resize', () => {
      this.init();
    });
    this.sliderPagination.addEventListener('click', e => {
      this.change(e);
    }); //////////////////////// Interval//////////////////////////

    this.intervalId = setInterval(() => {
      this.autoClick();
    }, 3000);
    this.sliderPagination.addEventListener('mouseover', () => {
      clearInterval(this.intervalId);
    });
    this.sliderPagination.addEventListener('mouseout', () => {
      this.intervalId = setInterval(() => {
        this.autoClick();
      }, 3000);
    }); //////////////////////// Touch//////////////////////////

    this.sliderInner.addEventListener('touchstart', e => {
      this.handleTouchStart(e);
      clearInterval(this.intervalId);
    }, false);
    this.sliderInner.addEventListener('touchmove', e => {
      this.handleTouchMove(e);
    }, false);
  }

  init() {
    this.width = this.sliderInner.offsetWidth;
    this.sliderLine.style.width = this.width * this.sliderSlides.length + 'px';
    this.sliderSlides.forEach(item => {
      item.style.width = this.width + 'px';
      item.style.height = 'auto';
    });
  }

  change(e) {
    if (e.target != this.sliderPagination) {
      this.sliderRounds.forEach((btn, index) => {
        btn.classList.remove('active');

        if (e.target === btn) {
          this.count = index;
          this.translate();
        }
      });
    }
  }

  translate() {
    this.sliderRounds[this.count].classList.add('active');
    this.sliderLine.style.transform = `translateX(-${this.count * this.width}px)`;
  }

  autoClick() {
    this.sliderRounds.forEach(btn => {
      btn.classList.remove('active');
    });
    this.count++;

    if (this.count >= this.sliderRounds.length) {
      this.count = 0;
      this.translate();
    } else {
      this.translate();
    }
  }

  handleTouchStart(e) {
    let touch = e.touches[0];
    this.x1 = touch.clientX;
    this.y1 = touch.clientY;
  }

  handleTouchMove(e) {
    if (!(this.x1 || this.y1)) {
      return false;
    }

    let touch = e.touches[0];
    let x2 = touch.clientX;
    let y2 = touch.clientY;
    let xDiff = x2 - this.x1;
    let yDiff = y2 - this.y1; // console.log(this.x1, x2);

    if (xDiff > 0) {
      //r
      this.sliderRounds.forEach(btn => {
        btn.classList.remove('active');
      });
      this.count--;

      if (this.count < 0) {
        this.count = this.sliderRounds.length - 1;
        this.sliderRounds[this.count].classList.add('active');
        this.sliderLine.style.transform = `translateX(-${this.count * this.width}px)`;
      }

      console.log(this.count);
      this.sliderRounds[this.count].classList.add('active');
      this.sliderLine.style.transform = `translateX(-${this.count * this.width}px)`;
    } else {
      //l
      this.autoClick();
    }

    this.x1 = null;
    this.y1 = null;
  }

}

let slider = new Slider();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNsaWRlci5qcyJdLCJuYW1lcyI6WyJTbGlkZXIiLCJjb25zdHJ1Y3RvciIsInNsaWRlcklubmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwic2xpZGVyTGluZSIsInNsaWRlclNsaWRlcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJzbGlkZXJQYWdpbmF0aW9uIiwic2xpZGVyUm91bmRzIiwiY291bnQiLCJ4MSIsInkxIiwiaW5pdCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiY2hhbmdlIiwiaW50ZXJ2YWxJZCIsInNldEludGVydmFsIiwiYXV0b0NsaWNrIiwiY2xlYXJJbnRlcnZhbCIsImhhbmRsZVRvdWNoU3RhcnQiLCJoYW5kbGVUb3VjaE1vdmUiLCJ3aWR0aCIsIm9mZnNldFdpZHRoIiwic3R5bGUiLCJsZW5ndGgiLCJmb3JFYWNoIiwiaXRlbSIsImhlaWdodCIsInRhcmdldCIsImJ0biIsImluZGV4IiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwidHJhbnNsYXRlIiwiYWRkIiwidHJhbnNmb3JtIiwidG91Y2giLCJ0b3VjaGVzIiwiY2xpZW50WCIsImNsaWVudFkiLCJ4MiIsInkyIiwieERpZmYiLCJ5RGlmZiIsImNvbnNvbGUiLCJsb2ciLCJzbGlkZXIiXSwibWFwcGluZ3MiOiJBQUNBLE1BQUFBLE1BQUEsQ0FBQTtBQUNBQyxFQUFBQSxXQUFBLEdBQUE7QUFDQSxTQUFBQyxXQUFBLEdBQUFDLFFBQUEsQ0FBQUMsYUFBQSxDQUFBLGdCQUFBLENBQUE7QUFDQSxTQUFBQyxVQUFBLEdBQUEsS0FBQUgsV0FBQSxDQUFBRSxhQUFBLENBQUEsZUFBQSxDQUFBO0FBQ0EsU0FBQUUsWUFBQSxHQUFBLENBQUEsR0FBQSxLQUFBRCxVQUFBLENBQUFFLGdCQUFBLENBQUEsZ0JBQUEsQ0FBQSxDQUFBO0FBQ0EsU0FBQUMsZ0JBQUEsR0FBQSxLQUFBTixXQUFBLENBQUFFLGFBQUEsQ0FBQSxxQkFBQSxDQUFBO0FBQ0EsU0FBQUssWUFBQSxHQUFB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QUEsS0FBQUEsS0FBQSxHQUFBLENBQUEsRUFBQTtBQUNBLGFBQUFBLEtBQUEsR0FBQSxLQUFBRCxZQUFBLENBQUFrQixNQUFBLEdBQUEsQ0FBQTtBQUVBLGFBQUFsQixZQUFBLENBQUEsS0FBQUMsS0FBQSxFQUFBd0IsU0FBQSxDQUFBRyxHQUFBLENBQUEsUUFBQTtBQUNBLGFBQUFoQyxVQUFBLENBQUFxQixLQUFBLENBQUFZLFNBQUEsR0FBQSxlQUFBLEtBQUE1QixLQUFBLEdBQUEsS0FBQWMsS0FBQSxLQUFBO0FBRUE7O0FBQ0F1QixNQUFBQSxPQUFBLENBQUFDLEdBQUEsQ0FBQSxLQUFBdEMsS0FBQTtBQUNBLFdBQUFELFlBQUEsQ0FBQSxLQUFBQyxLQUFBLEVBQUF3QixTQUFBLENBQUFHLEdBQUEsQ0FBQSxRQUFBO0FBQ0EsV0FBQWhDLFVBQUEsQ0FBQXFCLEtBQUEsQ0FBQVksU0FBQSxHQUFBLGVBQUEsS0FBQTVCLEtBQUEsR0FBQSxLQUFBYyxLQUFBLEtBQUE7QUFHQSxLQXBCQSxNQW9CQTtBQUNBO0FBRUEsV0FBQUosU0FBQTtBQUNBOztBQUdBLFNBQUFULEVBQUEsR0FBQSxJQUFBO0FBQ0EsU0FBQUMsRUFBQSxHQUFBLElBQUE7QUFDQTs7QUF0S0E7O0FBeUtBLElBQUFxQyxNQUFBLEdBQUEsSUFBQWpELE1BQUEsRUFBQSIsImZpbGUiOiJhbGwubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbmNsYXNzIFNsaWRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLnNsaWRlcklubmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNsaWRlcl9faW5uZXInKTtcclxuICAgICAgICB0aGlzLnNsaWRlckxpbmUgPSB0aGlzLnNsaWRlcklubmVyLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXJfX2xpbmUnKTtcclxuICAgICAgICB0aGlzLnNsaWRlclNsaWRlcyA9IFsuLi50aGlzLnNsaWRlckxpbmUucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRlcl9fc2xpZGUnKV07XHJcbiAgICAgICAgdGhpcy5zbGlkZXJQYWdpbmF0aW9uID0gdGhpcy5zbGlkZXJJbm5lci5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyX19wYWdpbmF0aW9uJyk7XHJcbiAgICAgICAgdGhpcy5zbGlkZXJSb3VuZHMgPSBbLi4udGhpcy5zbGlkZXJJbm5lci5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGVyX19yb3VuZCcpXTtcclxuXHJcbiAgICAgICAgdGhpcy5jb3VudCA9IDA7XHJcblxyXG4gICAgICAgIHRoaXMueDEgPSBudWxsO1xyXG4gICAgICAgIHRoaXMueTEgPSBudWxsO1xyXG5cclxuXHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBDbGljay8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgdGhpcy5pbml0KClcclxuXHJcblxyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdCgpXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgdGhpcy5zbGlkZXJQYWdpbmF0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2UoZSlcclxuICAgICAgICB9KVxyXG5cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIEludGVydmFsLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbiAgICAgICAgdGhpcy5pbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmF1dG9DbGljaygpO1xyXG4gICAgICAgIH0sIDMwMDApO1xyXG5cclxuXHJcbiAgICAgICAgdGhpcy5zbGlkZXJQYWdpbmF0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsICgpID0+IHtcclxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsSWQpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgdGhpcy5zbGlkZXJQYWdpbmF0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmludGVydmFsSWQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmF1dG9DbGljaygpO1xyXG4gICAgICAgICAgICB9LCAzMDAwKTtcclxuICAgICAgICB9KVxyXG5cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIFRvdWNoLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbiAgICAgICAgdGhpcy5zbGlkZXJJbm5lci5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgKGUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVUb3VjaFN0YXJ0KGUpO1xyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWxJZCk7XHJcbiAgICAgICAgfSwgZmFsc2UpO1xyXG5cclxuICAgICAgICB0aGlzLnNsaWRlcklubmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlVG91Y2hNb3ZlKGUpO1xyXG4gICAgICAgIH0sIGZhbHNlKTtcclxuXHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIHRoaXMud2lkdGggPSB0aGlzLnNsaWRlcklubmVyLm9mZnNldFdpZHRoO1xyXG4gICAgICAgIHRoaXMuc2xpZGVyTGluZS5zdHlsZS53aWR0aCA9IHRoaXMud2lkdGggKiB0aGlzLnNsaWRlclNsaWRlcy5sZW5ndGggKyAncHgnO1xyXG5cclxuICAgICAgICB0aGlzLnNsaWRlclNsaWRlcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICBpdGVtLnN0eWxlLndpZHRoID0gdGhpcy53aWR0aCArICdweCc7XHJcbiAgICAgICAgICAgIGl0ZW0uc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nO1xyXG5cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGNoYW5nZShlKSB7XHJcbiAgICAgICAgaWYgKGUudGFyZ2V0ICE9IHRoaXMuc2xpZGVyUGFnaW5hdGlvbikge1xyXG5cclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2xpZGVyUm91bmRzLmZvckVhY2goKGJ0biwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQgPT09IGJ0bikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY291bnQgPSBpbmRleDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zbGF0ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHRyYW5zbGF0ZSgpIHtcclxuXHJcbiAgICAgICAgdGhpcy5zbGlkZXJSb3VuZHNbdGhpcy5jb3VudF0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcblxyXG4gICAgICAgIHRoaXMuc2xpZGVyTGluZS5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgtJHt0aGlzLmNvdW50ICogdGhpcy53aWR0aH1weClgO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBhdXRvQ2xpY2soKSB7XHJcbiAgICAgICAgdGhpcy5zbGlkZXJSb3VuZHMuZm9yRWFjaChidG4gPT4ge1xyXG4gICAgICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jb3VudCsrO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5jb3VudCA+PSB0aGlzLnNsaWRlclJvdW5kcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5jb3VudCA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMudHJhbnNsYXRlKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy50cmFuc2xhdGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZVRvdWNoU3RhcnQoZSkge1xyXG5cclxuICAgICAgICBsZXQgdG91Y2ggPSBlLnRvdWNoZXNbMF07XHJcbiAgICAgICAgdGhpcy54MSA9IHRvdWNoLmNsaWVudFg7XHJcbiAgICAgICAgdGhpcy55MSA9IHRvdWNoLmNsaWVudFk7XHJcblxyXG5cclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVUb3VjaE1vdmUoZSkge1xyXG5cclxuICAgICAgICBpZiAoISh0aGlzLngxIHx8IHRoaXMueTEpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHRvdWNoID0gZS50b3VjaGVzWzBdO1xyXG5cclxuICAgICAgICBsZXQgeDIgPSB0b3VjaC5jbGllbnRYO1xyXG4gICAgICAgIGxldCB5MiA9IHRvdWNoLmNsaWVudFk7XHJcblxyXG5cclxuXHJcbiAgICAgICAgbGV0IHhEaWZmID0geDIgLSB0aGlzLngxO1xyXG4gICAgICAgIGxldCB5RGlmZiA9IHkyIC0gdGhpcy55MTtcclxuXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy54MSwgeDIpO1xyXG5cclxuICAgICAgICBpZiAoeERpZmYgPiAwKSB7XHJcbiAgICAgICAgICAgIC8vclxyXG5cclxuICAgICAgICAgICAgdGhpcy5zbGlkZXJSb3VuZHMuZm9yRWFjaChidG4gPT4ge1xyXG4gICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgdGhpcy5jb3VudC0tO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jb3VudCA8IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY291bnQgPSB0aGlzLnNsaWRlclJvdW5kcy5sZW5ndGggLSAxO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuc2xpZGVyUm91bmRzW3RoaXMuY291bnRdLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zbGlkZXJMaW5lLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKC0ke3RoaXMuY291bnQgKiB0aGlzLndpZHRofXB4KWA7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuY291bnQpO1xyXG4gICAgICAgICAgICB0aGlzLnNsaWRlclJvdW5kc1t0aGlzLmNvdW50XS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgdGhpcy5zbGlkZXJMaW5lLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKC0ke3RoaXMuY291bnQgKiB0aGlzLndpZHRofXB4KWA7XHJcblxyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvL2xcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYXV0b0NsaWNrKCk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgdGhpcy54MSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy55MSA9IG51bGw7XHJcbiAgICB9XHJcbn1cclxuXHJcbmxldCBzbGlkZXIgPSBuZXcgU2xpZGVyKCk7Il19
